
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>How to Write Automation Tests with Espresso</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid="Google Analytics ID"
                  id="docs"
                  title="How to Write Automation Tests with Espresso"
                  environment="web"
                  feedback-link="A link where users can go to provide feedback (Maybe the git repo)">
    
      <google-codelab-step label="Welcome" duration="0">
        <p>In this codelab you will learn how to write automation tests with Espresso: Android automated testing framework.</p>
<h2 class="checklist" is-upgraded>What You&#39;ll Learn</h2>
<ul class="checklist">
<li>How to setup Espresso</li>
<li>How to record Espresso Test, Save it &amp; Run</li>
<li>How to write Espreso Tests</li>
</ul>
<h2 is-upgraded>Prerequisites</h2>
<ul>
<li>Android Studio</li>
<li>Android Device</li>
<li>Source Control Tool: GitExtensions/Sourcetree</li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="App Overview" duration="0">
        <p>In this codelab you will modify the <a href="https://github.com/oaviad/espressoClub" target="_blank">EspressoClub</a> project. You will setup Espresso in the project for testing and then you will test app&#39;s functionality.</p>
<p>In order to login, user has to enter valid credentials in the login screen (LoginActivity) : valid email and valid password (&gt;5 characters). After user has logged in the main screen will be launched (MainActivity).</p>
<p>See figures below.</p>
<p class="image-container"><img src="img/700f580727ef221.png"></p>
<p class="image-container"><img src="img/ee4898c3ad244189.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Getting Started" duration="0">
        <p>To get the sample app:</p>
<p>Clone the repository from GitHub and switch to the <strong>starter</strong> branch:</p>
<pre><code>$  git clone https://oaviad.github.io/codelab
</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="What is the Espresso Framework?" duration="0">
        <aside class="special"><p>The Espresso testing framework provides a set of APIs to build UI tests to test user flows within an app. These APIs let you write automated UI tests that are concise and that run reliably. Espresso is well-suited for writing white box-style automated tests, where the test code utilizes implementation code details from the app under test.</p>
</aside>
<p>The main components of Espresso:</p>
<ul>
<li><strong>Espresso</strong>: Entry point to interactions with views (via onView() and onData()). Also exposes APIs that are not necessarily tied to any view, such as pressBack().</li>
<li><strong>ViewMatchers</strong>:  allows you to find a view in the current view hierarchy.</li>
<li><strong>ViewActions</strong>: allows you to perform actions on the views.</li>
<li><strong>ViewAssertions</strong>: allows you to assert the view state.</li>
</ul>
<aside class="special"><p><strong>Tip</strong>: Download the <a href="https://developer.android.com/training/testing/espresso/cheat-sheet" target="_blank">Espresso cheat sheet</a></p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="Espresso Setup Instructions" duration="0">
        <h2 is-upgraded>Add Espresso dependencies</h2>
<p>In your app&#39;s top-level build.gradle file, you need to specify these libraries as dependencies:</p>
<pre><code>dependencies {
    androidTestImplementation &#39;androidx.test:core-ktx:1.2.0&#39;
    androidTestImplementation &#39;androidx.test.ext:junit-ktx:1.1.1&#39;
    androidTestImplementation &#39;androidx.test:runner:1.2.0&#39;
    androidTestImplementation &#39;androidx.test:rules:1.2.0&#39;
    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.2.0&#39;
    androidTestImplementation &#39;androidx.test.espresso:espresso-intents:3.2.0&#39;
    androidTestImplementation &#34;com.google.truth:truth:0.44&#34;
}
</code></pre>
<h2 is-upgraded>Set the instrumentation runner</h2>
<pre><code>testInstrumentationRunner &#34;androidx.test.runner.AndroidJUnitRunner&#34;
</code></pre>
<aside class="special"><p><strong>Note</strong>: To learn more about <strong>Espresso Setup Instructions</strong>, you can read <a href="https://developer.android.com/training/testing/espresso/setup" target="_blank">here</a>.</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="Espresso Test Recorder" duration="0">
        <aside class="special"><p>The Espresso Test Recorder tool lets you create UI tests for your app without writing test code. By recording a test scenario, you can record your interactions with a device and add assertions to verify UI elements in particular snapshots of your app. Espresso Test Recorder then takes the saved recording and automatically generates a corresponding UI test that you can run to test your app</p>
</aside>
<p>To start recording a test with Espresso Test Recorder:</p>
<ul>
<li>Click Run &gt; Record Espresso Test.</li>
<li>In the Select Deployment Target window, choose the device on which you want to record the test. Click OK.</li>
<li>Espresso Test Recorder triggers a build of your project, and the app must install and launch before Espresso Test Recorder allows you to interact with it. The Record Your Test window appears after the app launches. Interact with your device to start logging events such as &#34;tap&#34; and &#34;type&#34; actions.</li>
<li>To save a recording, click OK.</li>
</ul>
<aside class="special"><p><strong>Note</strong>: To learn more about <strong>Espresso Test Recorder</strong>, you can read <a href="https://developer.android.com/studio/test/espresso-test-recorder" target="_blank">here</a>.</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="Task1: Record login flow" duration="0">
        <aside class="special"><p>Record the login flow and save your recording to Kotlin class.</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="Task2: Validate user enters valid credentials" duration="0">
        

      </google-codelab-step>
    
      <google-codelab-step label="Task3: Validate user enters invalid credentials" duration="0">
        

      </google-codelab-step>
    
      <google-codelab-step label="Task4: Validate login button is sending the right Intent" duration="0">
        

      </google-codelab-step>
    
      <google-codelab-step label="Task5: Setup Intent before launching Activity" duration="0">
        

      </google-codelab-step>
    
      <google-codelab-step label="Summary" duration="0">
        

      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>

</body>
</html>
